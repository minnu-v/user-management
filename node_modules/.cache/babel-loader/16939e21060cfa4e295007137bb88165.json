{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/radical/React/management/src/components/employeeManagement/addEmployee/Uploads.js\";\nimport React, { Component } from \"react\";\nimport UploadService from \"../services/upload-files.service\";\nexport default class Uploads extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFiles = this.selectFiles.bind(this);\n    this.upload = this.upload.bind(this);\n    this.uploadFiles = this.uploadFiles.bind(this);\n    this.state = {\n      selectedFiles: undefined,\n      progressInfos: [],\n      message: [],\n      fileInfos: []\n    };\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then(response => {\n      this.setState({\n        fileInfos: response.data\n      });\n    });\n  }\n\n  selectFiles(event) {\n    this.setState({\n      progressInfos: [],\n      selectedFiles: event.target.files\n    });\n  }\n\n  upload(idx, file) {\n    let _progressInfos = [...this.state.progressInfos];\n    UploadService.upload(file, event => {\n      _progressInfos[idx].percentage = Math.round(100 * event.loaded / event.total);\n      this.setState({\n        _progressInfos\n      });\n    }).then(response => {\n      this.setState(prev => {\n        let nextMessage = [...prev.message, \"Uploaded the file successfully: \" + file.name];\n        return {\n          message: nextMessage\n        };\n      });\n      return UploadService.getFiles();\n    }).then(files => {\n      this.setState({\n        fileInfos: files.data\n      });\n    }).catch(() => {\n      _progressInfos[idx].percentage = 0;\n      this.setState(prev => {\n        let nextMessage = [...prev.message, \"Could not upload the file: \" + file.name];\n        return {\n          progressInfos: _progressInfos,\n          message: nextMessage\n        };\n      });\n    });\n  }\n\n  uploadFiles() {\n    const selectedFiles = this.state.selectedFiles;\n    let _progressInfos = [];\n\n    for (let i = 0; i < selectedFiles.length; i++) {\n      _progressInfos.push({\n        percentage: 0,\n        fileName: selectedFiles[i].name\n      });\n    }\n\n    this.setState({\n      progressInfos: _progressInfos,\n      message: []\n    }, () => {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        this.upload(i, selectedFiles[i]);\n      }\n    });\n  }\n\n  render() {\n    const {\n      selectedFiles,\n      progressInfos,\n      message,\n      fileInfos\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [progressInfos && progressInfos.map((progressInfo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: progressInfo.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar progress-bar-info\",\n            role: \"progressbar\",\n            \"aria-valuenow\": progressInfo.percentage,\n            \"aria-valuemin\": \"0\",\n            \"aria-valuemax\": \"100\",\n            style: {\n              width: progressInfo.percentage + \"%\"\n            },\n            children: [progressInfo.percentage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-8\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"btn btn-default p-0\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              multiple: true,\n              onChange: this.selectFiles\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success btn-sm\",\n            disabled: !selectedFiles,\n            onClick: this.uploadFiles,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), message.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-secondary\",\n        role: \"alert\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: message.map((item, i) => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 24\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: \"List of Files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group list-group-flush\",\n          children: fileInfos && fileInfos.map((file, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: file.url,\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/radical/React/management/src/components/employeeManagement/addEmployee/Uploads.js"],"names":["React","Component","UploadService","Uploads","constructor","props","selectFiles","bind","upload","uploadFiles","state","selectedFiles","undefined","progressInfos","message","fileInfos","componentDidMount","getFiles","then","response","setState","data","event","target","files","idx","file","_progressInfos","percentage","Math","round","loaded","total","prev","nextMessage","name","catch","i","length","push","fileName","render","map","progressInfo","index","width","item","url"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../services/upload-files.service\";\n\nexport default class Uploads extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFiles = this.selectFiles.bind(this);\n    this.upload = this.upload.bind(this);\n    this.uploadFiles = this.uploadFiles.bind(this);\n\n    this.state = {\n      selectedFiles: undefined,\n      progressInfos: [],\n      message: [],\n\n      fileInfos: [],\n    };\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then((response) => {\n      this.setState({\n        fileInfos: response.data,\n      });\n    });\n  }\n\n  selectFiles(event) {\n    this.setState({\n      progressInfos: [],\n      selectedFiles: event.target.files,\n    });\n  }\n\n  upload(idx, file) {\n    let _progressInfos = [...this.state.progressInfos];\n\n    UploadService.upload(file, (event) => {\n      _progressInfos[idx].percentage = Math.round((100 * event.loaded) / event.total);\n      this.setState({\n        _progressInfos,\n      });\n    })\n      .then((response) => {\n        this.setState((prev) => {\n          let nextMessage = [...prev.message, \"Uploaded the file successfully: \" + file.name];\n          return {\n            message: nextMessage\n          };\n        });\n\n        return UploadService.getFiles();\n      })\n      .then((files) => {\n        this.setState({\n          fileInfos: files.data,\n        });\n      })\n      .catch(() => {\n        _progressInfos[idx].percentage = 0;\n        this.setState((prev) => {\n          let nextMessage = [...prev.message, \"Could not upload the file: \" + file.name];\n          return {\n            progressInfos: _progressInfos,\n            message: nextMessage\n          };\n        });\n      });\n  }\n\n  uploadFiles() {\n    const selectedFiles = this.state.selectedFiles;\n\n    let _progressInfos = [];\n\n    for (let i = 0; i < selectedFiles.length; i++) {\n      _progressInfos.push({ percentage: 0, fileName: selectedFiles[i].name });\n    }\n\n    this.setState(\n      {\n        progressInfos: _progressInfos,\n        message: [],\n      },\n      () => {\n        for (let i = 0; i < selectedFiles.length; i++) {\n          this.upload(i, selectedFiles[i]);\n        }\n      }\n    );\n  }\n\n  render() {\n    const { selectedFiles, progressInfos, message, fileInfos } = this.state;\n\n    return (\n      <div>\n        {progressInfos &&\n          progressInfos.map((progressInfo, index) => (\n            <div className=\"mb-2\" key={index}>\n              <span>{progressInfo.fileName}</span>\n              <div className=\"progress\">\n                <div\n                  className=\"progress-bar progress-bar-info\"\n                  role=\"progressbar\"\n                  aria-valuenow={progressInfo.percentage}\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                  style={{ width: progressInfo.percentage + \"%\" }}\n                >\n                  {progressInfo.percentage}%\n                </div>\n              </div>\n            </div>\n          ))}\n\n        <div className=\"row my-3\">\n          <div className=\"col-8\">\n            <label className=\"btn btn-default p-0\">\n              <input type=\"file\" multiple onChange={this.selectFiles} />\n            </label>\n          </div>\n\n          <div className=\"col-4\">\n            <button\n              className=\"btn btn-success btn-sm\"\n              disabled={!selectedFiles}\n              onClick={this.uploadFiles}\n            >\n              Upload\n            </button>\n          </div>\n        </div>\n\n        {message.length > 0 && (\n          <div className=\"alert alert-secondary\" role=\"alert\">\n            <ul>\n              {message.map((item, i) => {\n                return <li key={i}>{item}</li>;\n              })}\n            </ul>\n          </div>\n        )}\n\n        <div className=\"card\">\n          <div className=\"card-header\">List of Files</div>\n          <ul className=\"list-group list-group-flush\">\n            {fileInfos &&\n              fileInfos.map((file, index) => (\n                <li className=\"list-group-item\" key={index}>\n                  <a href={file.url}>{file.name}</a>\n                </li>\n              ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}